import{r as m,o as a,c,a as s,b as h,w as b,d as p,e as v,v as g,f as $,t as _,n as S,F as E,g as A,h as k,i as w,j as T,k as C,l as B,m as F,p as L,q as V,s as O}from"./vendor.a9fb6f1a.js";const q=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))i(d);new MutationObserver(d=>{for(const e of d)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(d){const e={};return d.integrity&&(e.integrity=d.integrity),d.referrerpolicy&&(e.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?e.credentials="include":d.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(d){if(d.ep)return;d.ep=!0;const e=n(d);fetch(d.href,e)}};q();var u=(t,o)=>{const n=t.__vccOpts||t;for(const[i,d]of o)n[i]=d;return n};const I={},R={class:"main-header flex items-center justify-between"},N=s("div",{class:"logo uppercase"},[s("h2",null,"todos")],-1),U={class:"flex gap-1"},H=p("Home"),j=p("todo");function M(t,o){const n=m("router-link");return a(),c("header",R,[N,s("nav",U,[h(n,{class:"link",to:"/"},{default:b(()=>[H]),_:1}),h(n,{class:"link",to:"/todo"},{default:b(()=>[j]),_:1})])])}var P=u(I,[["render",M]]);const J={name:"app",created(){this.$store.dispatch({type:"loadTodos"})},components:{appHeader:P}},z={class:"app-container container"};function G(t,o,n,i,d,e){const r=m("app-header"),l=m("router-view");return a(),c("section",z,[h(r),h(l)])}var K=u(J,[["render",G]]);const W={name:"todo-filter",data(){return{filterBy:{vendor:""}}},methods:{setFilter(){this.$emit("setFilter",this.filterBy)}}},Q={class:"todo-filter"};function X(t,o,n,i,d,e){return a(),c("section",Q,[v(s("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>d.filterBy.vendor=r),onInput:o[1]||(o[1]=(...r)=>e.setFilter&&e.setFilter(...r)),type:"text",class:"form-input",placeholder:"Search vendor..."},null,544),[[g,d.filterBy.vendor]])])}var Y=u(W,[["render",X]]);const Z={},oo={class:"custom-todod flex flex-col gap-1 items-center"};function to(t,o){return a(),c("article",oo,[s("header",null,[$(t.$slots,"header",{},void 0,!0)]),s("main",null,[$(t.$slots,"default",{},void 0,!0)]),s("footer",null,[$(t.$slots,"footer",{},void 0,!0)])])}var eo=u(Z,[["render",to],["__scopeId","data-v-17a41438"]]);const so={name:"todo-preview",props:{todo:Object},components:{CustomCard:eo},methods:{goToDetail(){this.$router.push(`/todo/${this.todo.id}`)},goToEdit(){this.$router.push(`/todo/edit/${this.todo.id}`)},removeTodo(t){this.$emit("removeTodo",t)},doneTodo(t){this.$emit("doneTodo",t)}},computed:{getCreatedAtDateFormat({todo:t}){return new Date(t.createdAt).toLocaleString()},getDoneAtDateFormat({todo:t}){return t.doneAt?new Date(t.doneAt).toLocaleString():""}}},no={class:"todo-preview"},ro=s("span",{class:"fw-bold"},"Title:",-1),io=s("span",{class:"fw-bold"},"Description:",-1),ao=s("span",{class:"fw-bold"},"Create At:",-1),lo=s("span",{class:"fw-bold"},"Done At:",-1),co=s("span",{class:"fw-bold"},"Status:",-1),uo={class:"btn-group"},po=["disabled"];function _o(t,o,n,i,d,e){const r=m("custom-card");return a(),c("li",no,[h(r,null,{header:b(()=>[s("p",null,[ro,p(" "+_(n.todo.title),1)]),s("p",null,[io,p(" "+_(n.todo.description),1)]),s("p",null,[ao,p(" "+_(e.getCreatedAtDateFormat),1)]),s("p",null,[lo,p(" "+_(e.getDoneAtDateFormat),1)]),s("p",null,[co,p(" "+_(n.todo.status),1)])]),footer:b(()=>[s("div",uo,[s("button",{onClick:o[0]||(o[0]=(...l)=>e.goToEdit&&e.goToEdit(...l)),class:"btn btn-primary"},"edit"),s("button",{onClick:o[1]||(o[1]=l=>e.removeTodo(n.todo.id)),class:"btn btn-danger btn"},"delete"),s("button",{onClick:o[2]||(o[2]=l=>e.doneTodo(n.todo)),class:S([n.todo.doneAt?"btn-secondary":"btn-info","btn"]),disabled:n.todo.doneAt},_(n.todo.doneAt?"Great job!":"Done?"),11,po)])]),_:1})])}var mo=u(so,[["render",_o]]);const fo={props:{todos:{type:Array,required:!0}},components:{todoPreview:mo},methods:{removeTodo(t){this.$emit("removeTodo",t)},doneTodo(t){this.$emit("doneTodo",t)}}},ho={class:"todo-list clean-list grid gap-1"};function vo(t,o,n,i,d,e){const r=m("todo-preview");return a(),c("ul",ho,[(a(!0),c(E,null,A(n.todos,l=>(a(),k(r,{onDoneTodo:e.doneTodo,onRemoveTodo:e.removeTodo,todo:l,key:l.id},null,8,["onDoneTodo","onRemoveTodo","todo"]))),128))])}var To=u(fo,[["render",vo]]);const yo={name:"todo-app",components:{todoList:To,todoFilter:Y},data(){return{filterBy:null}},methods:{setFilter(t){this.filterBy=t},goToEdit(){this.$router.push("/todo/edit")},removeTodo(t){this.$store.dispatch({type:"removeTodo",id:t})},doneTodo(t){this.$store.dispatch({type:"doneTodo",todo:t})}},computed:{getTodos(){return this.$store.getters.todos},todosToShow(){if(!this.filterBy)return this.getTodos;const t=new RegExp(this.filterBy.vendor,"i");return this.getTodos.filter(o=>t.test(o.vendor))}}},go={class:"todo-app container flex flex-col gap-1"};function bo(t,o,n,i,d,e){const r=m("todo-filter"),l=m("todo-list");return a(),c("section",go,[s("button",{onClick:o[0]||(o[0]=(...D)=>e.goToEdit&&e.goToEdit(...D)),class:"btn btn-secondary"},"Add a new todo"),h(r,{onSetFilter:e.setFilter},null,8,["onSetFilter"]),e.todosToShow?(a(),k(l,{key:0,onDoneTodo:e.doneTodo,onRemoveTodo:e.removeTodo,todos:e.todosToShow},null,8,["onDoneTodo","onRemoveTodo","todos"])):w("",!0)])}var $o=u(yo,[["render",bo]]);const y="https://todoapp-fastapi-backend.herokuapp.com/",f={query:wo,getById:xo,remove:Eo,save:Ao,getEmptyTodo:Do,update:ko};async function wo(){const{data:t}=await T.get(`${y}todo/`);return t}async function xo(t){const{data:o}=await T.get(`${y}todo/${t}/`);return o}async function Eo(t){const{data:o}=await T.delete(`${y}todo/${t}/`);return o}async function Ao(t){const{data:o}=await T.post(`${y}todo/`,t);return o}async function ko(t){const{data:o}=await T.put(`${y}todo/${t.id}`,t);return o}function Do(){return{title:null,description:null,doneAt:null,status:null,createdAt:Date.now()}}const So={name:"todo-edit",data(){return{todoToEdit:null}},async created(){const{id:t}=this.$route.params,{getById:o,getEmptyTodo:n}=f;this.todoToEdit=t?await o(t):n()},methods:{goBack(){this.$router.push("/todo")},async saveTodo(){await this.$store.dispatch({type:"saveTodo",todo:this.todoToEdit}),await this.$router.push("/todo")}}},Co={key:0,class:"todo-edit py-2"},Bo={class:"form-control"},Fo=s("label",{for:"title"},"Title",-1),Lo={class:"form-control"},Vo=s("label",{for:"desc"},"Description",-1),Oo=s("div",null,"Status",-1),qo={class:"form-control flex"},Io=["for"],Ro=["id","value"],No={key:0,class:"form-control"},Uo=s("label",{for:"done"},"Description",-1),Ho={class:"form-control"},jo=s("label",null,"Created At",-1),Mo=["value"],Po={class:"btn-group"};function Jo(t,o,n,i,d,e){return d.todoToEdit?(a(),c("section",Co,[s("form",{onSubmit:o[6]||(o[6]=C((...r)=>e.saveTodo&&e.saveTodo(...r),["prevent"])),class:"form"},[s("div",Bo,[Fo,v(s("input",{required:"","onUpdate:modelValue":o[0]||(o[0]=r=>d.todoToEdit.title=r),id:"title",type:"text",class:"form-input",placeholder:"Enter your todo Title here..."},null,512),[[g,d.todoToEdit.title]])]),s("div",Lo,[Vo,v(s("input",{required:"","onUpdate:modelValue":o[1]||(o[1]=r=>d.todoToEdit.description=r),id:"desc",type:"text",class:"form-input",placeholder:"Enter your todo description here..."},null,512),[[g,d.todoToEdit.description]])]),Oo,s("div",qo,[(a(),c(E,null,A(["open","in progress","done"],r=>s("label",{for:r,class:"form-input"},[p(_(r)+" ",1),v(s("input",{id:r,type:"radio",name:"status","onUpdate:modelValue":o[2]||(o[2]=l=>d.todoToEdit.status=l),value:r},null,8,Ro),[[B,d.todoToEdit.status]])],8,Io)),64))]),d.todoToEdit.doneAt?(a(),c("div",No,[Uo,v(s("input",{disabled:"",type:"text",id:"done",class:"form-input","onUpdate:modelValue":o[3]||(o[3]=r=>d.todoToEdit.doneAt=r),placeholder:"Enter your todo description here..."},null,512),[[g,d.todoToEdit.doneAt]])])):w("",!0),s("div",Ho,[jo,s("input",{disabled:"",type:"text",class:"form-input",value:new Date(d.todoToEdit.createdAt).toLocaleString()},null,8,Mo)]),s("div",Po,[s("button",{onClick:o[4]||(o[4]=(...r)=>e.saveTodo&&e.saveTodo(...r)),class:"btn btn-info",type:"submit"},"save"),s("button",{onClick:o[5]||(o[5]=(...r)=>e.goBack&&e.goBack(...r)),class:"btn btn-danger-text"},"go back")])],32)])):w("",!0)}var zo=u(So,[["render",Jo]]);const Go={name:"homepage"};function Ko(t,o,n,i,d,e){return a(),c("section",null," Homepage ")}var Wo=u(Go,[["render",Ko]]);const Qo=F({history:L(),linkActiveClass:"active",routes:[{path:"/",name:"home",component:Wo},{path:"/todo",name:"todo-app",component:$o},{path:"/todo/edit/:id?",name:"todo-edit",component:zo}]});var Xo={state:{todos:null},getters:{todos(t){return t.todos}},mutations:{setTodos(t,{todos:o}){t.todos=o},removeTodo(t,{id:o}){const n=t.todos.findIndex(i=>i.id===o);t.todos.splice(n,1)},saveTodo(t,{todo:o}){const n=t.todos.findIndex(i=>i.id===o.id);n!==-1?t.todos.splice(n,1,o):t.todos.unshift(o)}},actions:{async loadTodos({commit:t}){try{const o=await f.query();t({type:"setTodos",todos:o})}catch{console.log("can't load todos")}},async removeTodo({commit:t},{id:o}){try{await f.remove(o),t({type:"removeTodo",id:o})}catch(n){console.log(n)}},async saveTodo({commit:t},{todo:o}){try{o.id?await f.update(o):await f.save(o)}catch(n){console.log(n)}finally{t({type:"saveTodo",todo:o})}},async doneTodo({commit:t},{todo:o}){const n=JSON.parse(JSON.stringify(o));n.doneAt=Date.now(),n.status="done";try{await f.update(n)}catch(i){console.log(i)}finally{t({type:"saveTodo",todo:n})}}}};const Yo=V({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{todoStore:Xo}});const x=O(K);x.use(Qo);x.use(Yo);x.mount("#app");
